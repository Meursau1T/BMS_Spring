<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title> 图书管理系统 </title>

    <script th:src="@{/js/jquery.min.js}" ></script>
    <script th:src="@{/js/afquery.js}" ></script>

    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">


    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- layer.js 对话框API -->
    <script th:src="@{/layer/layer.js}" ></script>

    <style>
        *{
            magin: 0px;
            padding: 0px;
            box-sizing: border-box;
        }
        .banner{
            padding: 10px;
            border-bottom: 1px solid #f1f1f1;
            background: linear-gradient(to bottom, #d0e7f7 0%, #fbfcfd 50%);
        }
        .header{
            padding: 10px;
            background: linear-gradient(to bottom, lightskyblue, #7dbedc 30%);
            height: 70px;
        }
        .user-thumbnail{
            position: absolute;
            left: 1250px;
        }
        .frame{
            height: 670px;
            width: 1300px;
            margin: auto;  /*让外框架水平居中*/
        }

    </style>


</head>

<body th:background="@{/img/background.png}">
<div class='header'>
    <div style="font-size: 24px;line-height:70px;position: absolute;left:200px;font-weight: bold;">图书管理系统</div>
    <div class="user-thumbnail">
        <img th:src="@{/img/user.jpg}" style="width: 50px;height: 50px;border-radius:50%">
        <span style="position: relative;left: -53px;top:17px;font-family: Arial" class="preferredFont">未登录</span>
    </div>

</div>

<div style="padding: 20px 550px 10px">
    <form th:action="@{/admin/queryBorrower}" method="post" class="form-inline">
            <span class="input-group" style="float: left">
                <input type="text" placeholder="输入借书者ID" class="form-control" name="borrower_id">
                <span class="input-group-btn">
                    <input type="submit" value="搜索" class="btn btn-default">
                </span>
            </span>
    </form>
    <span>
        <button class="btn btn-danger" data-toggle="modal" data-target="#delete" style="margin-top: 1px;margin-left: 5px;">
            删除借书者
        </button>
    </span>

</div>


<div class="frame" style="margin-left: 5%">

    <ul class="list-group" style="width: 10%;margin-left: 2%;margin-top: 1%;float: left;">
        <a th:href="@{/admin/info}">
            <li class="list-group-item">个人信息</li>
        </a>
        <a th:href="@{/admin/deleteBook}">
            <li class="list-group-item">查询/删除书籍</li>
        </a>
        <a th:href="@{/admin/addBook}">
            <li class="list-group-item">录入新书</li>
        </a>
        <a th:href="@{/admin/deleteBorrower}">
            <li class="list-group-item">查询/删除用户</li>
        </a>
        <a th:href="@{/admin/addBorrower}">
            <li class="list-group-item">新增用户</li>
        </a>
        <a th:href="@{/admin/reservation}">
            <li class="list-group-item">借阅信息</li>
        </a>
    </ul>

    <div class="panel panel-default" style="width: 70%;margin-left: 2%;margin-top: 1%;float: left">
        <div class="panel-heading">
            <h3 class="panel-title" style="text-align:center">借书者个人信息</h3>
        </div>
        <div class="panel-body">
            <table class="table table-hover" style="text-align:center">
                <thead>
                <tr>
                    <th>借书者Id</th>
                    <th>姓名</th>
                    <th>手机</th>
                    <th>权限等级</th>
                    <th>已借阅的书籍</th>
                </tr>
                </thead>
                <tbody style="text-align: left">
                <tr>
                    <td th:text="${borrower.borrower_id}"></td>
                    <td th:text="${borrower.name}"></td>
                    <td th:text="${borrower.tel}"></td>
                    <td th:text="${borrower.level}"></td>
                    <td th:text="${borrower.borrowedNum}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div id="delete" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <button class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-title">
                <h3 class="text-center">删除借书者</h3>
            </div>
            <div class="modal-body">
                <form id="form-delete">
                    <div class="form-group has-feedback">
                        <label for="dl-id">book_id</label>
                        <div class="input-group">
                            <span class="input-group-addon"><span class="glyphicon glyphicon-phone"></span></span>
                            <input id="dl-id" class="form-control" placeholder="请输入borrower_id" maxlength="13" type="text">
                        </div>
                        <span style="color:red;display: none;" class="tips"></span>
                        <span style="display: none;" class="glyphicon glyphicon-remove form-control-feedback"></span>
                        <span style="display: none;" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>

                    <div class="text-right">
                        <button class="btn btn-primary" type="button" id="btn-delete">删除</button>
                        <button class="btn btn-danger" data-dismiss="modal">取消</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>


</body>

<script>
    var my = {};

    $('#btn-delete').click(function (e) {
        var id = document.getElementById("dl-id").value;
        var req = {
            'borrower_id': id
        };
        Af.rest('[[@{/admin/deleteBorrower}]]', req, function (data) {
            layer.msg('成功', {
                time: 1000,
                end: function () {
                    location.href = '[[@{/admin/deleteBorrower}]]';
                }
            })
        })

    });
</script>
</html>
